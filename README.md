# atsap-iot-sketches

–°–∫–µ—Ç—á–∏ –¥–ª—è IoT –¥–µ–≤–∞–π—Å–æ–≤



## –ù–∞–±–æ—Ä IoT –¥–µ–≤–∞–π—Å–æ–≤
#### [*esp32-controller*](./esp32-controller/)
–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã ESP32 –≤ –∫–∞—á–µ—Å—Ç–≤–µ —à–ª—é–∑–∞ (**gateway**), –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª—ã ESP-NOW –∏ MQTT. –û–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ ESP-NOW, –∏ –∏—Ö –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ MQTT-–±—Ä–æ–∫–µ—Ä



#### [*esp32-node-dht22*](./esp32-node-dht22/)
–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã ESP32 –≤ –∫–∞—á–µ—Å—Ç–≤–µ —É–∑–ª–∞ (**node**), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ DHT-22 –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –¥—Ä—É–≥–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É ESP32 —á–µ—Ä–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª ESP-NOW



## üõ† –†–µ—Ü–µ–ø—Ç—ã –¥–ª—è —Å–∫–µ—Ç—á–µ–π

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ WiFi –∫–∞–Ω–∞–ª–∞

```
int32_t getWiFiChannel(const char *ssid)
{
    if (int32_t n = WiFi.scanNetworks())
    {
        for (uint8_t i = 0; i < n; i++)
        {
            if (!strcmp(ssid, WiFi.SSID(i).c_str()))
            {
                return WiFi.channel(i);
            }
        }
    }

    return 0;
}
```

##### üîé –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–§—É–Ω–∫—Ü–∏—è `getWiFiChannel` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–Ω–∞–ª Wi-Fi —Å–µ—Ç–∏ –ø–æ –µ—ë SSID. –û–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ç–µ–π —Å –ø–æ–º–æ—â—å—é `WiFi.scanNetworks()` –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç SSID –∫–∞–∂–¥–æ–π –Ω–∞–π–¥–µ–Ω–Ω–æ–π —Å–µ—Ç–∏ —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º.

–ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–∞–Ω–∞–ª —ç—Ç–æ–π —Å–µ—Ç–∏ —á–µ—Ä–µ–∑ `WiFi.channel(i)`. –ï—Å–ª–∏ —Å–µ—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å, —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `0`.

